var str = '{"query":{"normalized":[{"from":"List_of_neighborhoods_of_the_District_of_Columbia_by_ward","to":"List of neighborhoods of the District of Columbia by ward"}],"pages":{"1774491":{"pageid":1774491,"ns":0,"title":"List of neighborhoods of the District of Columbia by ward","revisions":[{"*":"{{multiple image\n   | image1    = DC Ward Map.png\n   | width1    = 150\n   | caption1  = The District of Columbia is divided into 8 wards\n   | image2    = DC neighborhoods map.png\n   | width2    = 167\n   | caption2  = The neighborhoods of Washington DC.\n  }}\nThe [[Washington, DC|District of Columbia]] is divided into eight [[ward (politics)|ward]]s and 37 [[Advisory Neighborhood Commission]]s (ANCs) within these wards. Neighborhood names and boundaries are not officially defined. They may vary over time due to changes in local infrastructure or population.\n\n<noinclude>__TOC__<\/noinclude>\n{{-}}\n==Ward 1==\n[[Image:Map_of_Washington,_D.C.\'s_1st_ward.svg|thumb|150px|Ward 1]]\n(\'\'\'[[Council of the District of Columbia|Ward 1 Councilmember]]: [[Jim Graham]].)\n\n*[[Adams Morgan]]\n*[[Columbia Heights, Washington, D.C.|Columbia Heights]]\n*[[Howard University]]\n*[[Kalorama Triangle]]\n*[[LeDroit Park, Washington, D.C.|LeDroit Park]]\n*[[Mount Pleasant, Washington, D.C.|Mount Pleasant]]\n*[[Park View, Washington, D.C.|Park View]]\n*[[Pleasant Plains, Washington, D.C.|Pleasant Plains]]\n*[[Shaw, Washington, D.C.|Shaw]] (Part of the neighborhood is also in Ward 2)\n\n==Ward 2==\n[[Image:Map_of_Washington,_D.C.\'s_2nd_ward.svg|thumb|150px|Ward 2]]\n(\'\'\'[[Council of the District of Columbia|Ward 2 Councilmember]]:\'\'\' [[Jack Evans (D.C. Council)|Jack Evans]].)\n\n*[[Burleith]]\n*[[Chinatown, Washington, D.C.|Chinatown]]\n*[[Downtown Washington, D.C.|Downtown]]\n*[[Dupont Circle]]\n*[[Foggy Bottom]]\n*[[Georgetown, Washington, D.C.|Georgetown]]\n*[[Logan Circle, Washington, D.C.|Logan Circle]]\n*[[Mount Vernon Square]]\n*[[Penn Quarter, Washington, D.C.|Penn Quarter]]\n*[[Shaw, Washington, D.C.|Shaw]] (Part of the neighborhood is also in Ward 1)\n*[[Kalorama, Washington, D.C.|Sheridan Kalorama]]\n*[[Southwest Federal Center]]\n*[[West End, Washington, D.C.|West End]]\n\n==Ward 3==\n[[Image:Map_of_Washington,_D.C.\'s_3rd_ward.svg|thumb|150px|Ward 3]]\n(\'\'\'[[Council of the District of Columbia|Ward 3 Councilmember]]:\'\'\' [[Mary Cheh]].)\n\n*[[American University Park]]\n*[[Berkley, Washington, D.C.|Berkley]]\n*[[Cathedral Heights]]\n*[[Chevy Chase, Washington, D.C.|Chevy Chase]]\n*[[Cleveland Park]]\n*[[Colony Hill, Washington, D.C.|Colony Hill]]\n*[[Forest Hills, Washington, D.C.|Forest Hills]]\n*[[Foxhall, Washington, D.C.|Foxhall]]\n*[[Friendship Heights]]\n*[[Glover Park]]\n*[[Kent, Washington, D.C.|Kent]]\n*[[Massachusetts Heights]]\n*[[McLean Gardens]]\n*[[North Cleveland Park]]\n*[[Observatory Circle]]\n*[[Potomac Heights, Washington, D.C.|Potomac Heights]]\n*[[Spring Valley, Washington, D.C.|Spring Valley]]\n*[[Tenleytown]]\n*[[The Palisades, Washington, D.C.|The Palisades]]\n*[[Wakefield, Washington, D.C.|Wakefield]]\n*[[Wesley Heights]]\n*[[Woodland-Normanstone Terrace]]\n*[[Woodley Park, D.C.|Woodley Park]] (Part of the neighborhood is also in Ward 1)\n\n==Ward 4==\n[[Image:Map_of_Washington,_D.C.\'s_4th_ward.svg|thumb|150px|Ward 4]]\n(\'\'\'[[Council of the District of Columbia|Ward 4 Councilmember]]:\'\'\' [[Muriel Bowser]].)\n\n*[[Barnaby Woods, Washington, D.C.|Barnaby Woods]]\n*[[Brightwood, Washington, D.C.|Brightwood]]\n*[[Brightwood Park]]\n*[[Chevy Chase, Washington, D.C.|Chevy Chase]] (Part of the neighborhood is also in Ward 3)\n*[[Colonial Village, Washington, D.C.|Colonial Village]]\n*[[Crestwood, Washington, D.C.|Crestwood]]\n*[[Fort Totten, Washington, D.C.|Fort Totten]]\n*[[Hawthorne, Washington, D.C.|Hawthorne]] \n*[[Lamond-Riggs]]\n*[[Manor Park, Washington, D.C.|Manor Park]]\n*[[Petworth, Washington, D.C.|Petworth]]\n*[[Riggs Park]] \n*[[Shepherd Park]]\n*[[Sixteenth Street Heights]]\n*[[Takoma, Washington, D.C.|Takoma]]\n\n==Ward 5==\n[[Image:Map_of_Washington,_D.C.\'s_5th_ward.svg|thumb|150px|Ward 5]]\n(\'\'\'[[Council of the District of Columbia|Ward 5 Councilmember]]:\'\'\' [[Harry Thomas, Jr.]])\n\n*[[Arboretum (neighborhood), Washington, D.C.|Arboretum]]\n*[[Bloomingdale, Washington, D.C.|Bloomingdale]]\n*[[Brentwood, Washington, D.C.|Brentwood]]\n*[[Brookland, Washington, D.C.|Brookland]]\n*[[Carver Langston]]\n*[[Eckington, Washington, D.C.|Eckington]]\n*[[Edgewood, Washington, D.C.|Edgewood]]\n*[[Fort Lincoln, Washington, D.C.|Fort Lincoln]]\n*[[Fort Totten, Washington, D.C.|Fort Totten]] \n*[[Gateway (neighborhood), Washington, D.C.|Gateway]]\n*[[Ivy City, Washington, D.C.|Ivy City]]\n*[[Langdon, Washington, D.C.|Langdon]]\n*[[Michigan Park, Washington, D.C.|Michigan Park]]\n*[[North Michigan Park, Washington, D.C.|North Michigan Park]]\n*[[Pleasant Hill, Washington, D.C.|Pleasant Hill]]\n*[[Riggs Park]] (Part of the neighborhood is also in Ward 4)\n*[[Stronghold\/Metropolis View, Washington, D.C.|Stronghold\/Metropolis View]]\n*[[Trinidad, Washington, D.C.|Trinidad]]\n*[[Truxton Circle, Washington, D.C.|Truxton Circle]]\n*[[Woodridge, Washington, D.C.|Woodridge]]\n\n==Ward 6==\n[[Image:Map_of_Washington,_D.C.\'s_6th_ward.svg|thumb|150px|Ward 6]]\n(\'\'\'[[Council of the District of Columbia|Ward 6 Councilmember]]:\'\'\' [[Tommy Wells]])\n\n*[[Barney Circle, Washington, D.C.|Barney Circle]]\n*[[Capitol Hill, Washington, D.C.|Capitol Hill]]\n*[[Judiciary Square]]\n*[[Kingman Park, Washington, D.C.|Kingman Park]]\n*[[Navy Yard\/Near Southeast]]\n*[[Old City\/Near Northeast|Near Northeast]]\n*[[Southwest Waterfront]]\n*[[Sursum Corda Cooperative|Sursum Corda]]\n*[[Swampoodle]]\n*[[Union Station (Washington, D.C.)|Union Station]]\n\n==Ward 7==\n[[Image:Map_of_Washington,_D.C.\'s_7th_ward.svg|thumb|150px|Ward 7]]\n(\'\'\'[[Council of the District of Columbia|Ward 7 Councilmember]]:\'\'\' [[Yvette Alexander]])\n\n*[[Benning Heights, Washington, D.C.|Benning Heights]]\n*[[Benning Ridge, Washington, D.C.|Benning Ridge]]\n*[[Benning, Washington, D.C.|Benning]]\n*[[Burrville (Washington, D.C.)|Burrville]]\n*[[Capitol View, Washington, D.C.|Capitol View]]\n*[[Civic Betterment]]\n*[[Deanwood]]\n*[[Dupont Park]]\n*[[Eastland Gardens, Washington, D.C.|Eastland Gardens]]\n*[[Fairfax Village, Washington, D.C.|Fairfax Village]]\n*[[Fairlawn, Washington, D.C.|Fairlawn]]\n*[[Fort Davis, Washington, D.C.|Fort Davis]]\n*[[Fort Dupont, Washington, D.C.|Fort Dupont]]\n*[[Good Hope, Washington, D.C.|Good Hope]]\n*[[Grant Park, Washington, D.C.|Grant Park]]\n*[[Greenway, Washington, D.C.|Greenway]]\n*[[Hillbrook]]\n*[[Hillcrest, Washington, D.C.|Hillcrest]]\n*[[Kenilworth, Washington, D.C.|Kenilworth]]\n*[[Kingman Park]]\n*[[Lincoln Heights, Washington, D.C.|Lincoln Heights]]\n*[[Mahaning Heights, Washington, D.C.|Mahaning Heights]]\n*[[Marshall Heights]]\n*[[Mayfair, Washington, D.C.|Mayfair]]\n*[[Naylor Gardens]]\n*[[Penn Branch, Washington, D.C.|Penn Branch]]\n*[[Randle Highlands, Washington, D.C.|Randle Highlands]]\n*[[River Terrace, Washington, D.C.|River Terrace]]\n*[[Skyland, Washington, D.C.|Skyland]]\n*[[Summit Park, Washington, D.C.|Summit Park]]\n*[[Twining (neighborhood)|Twining]]\n\n==Ward 8==\n[[Image:Map_of_Washington,_D.C.\'s_8th_ward.svg|thumb|150px|Ward 8]]\n(\'\'\'[[Council of the District of Columbia|Ward 8 Councilmember]]:\'\'\' [[Marion S. Barry, Jr.]])\n\n*[[Anacostia]]\n*[[Barry Farm, Washington, D.C.|Barry Farm]]\n*[[Bellevue, Washington, D.C.|Bellevue]]\n*[[Buena Vista, Washington, D.C.|Buena Vista]]\n*[[Congress Heights]]\n*[[Douglass, Washington, D.C.|Douglass]]\n*[[Fairlawn, Washington, D.C.|Fairlawn]]\n*[[Garfield Heights, Washington, D.C.|Garfield Heights]]\n*[[Knox Hill, Washington, D.C.|Knox Hill]]\n*[[Shipley Terrace, Washington, D.C.|Shipley Terrace]]\n*[[Washington Highlands]]\n*[[Woodland, Washington, D.C.|Woodland]]\n\n==External links==\n{{Commons cat|Neighborhoods of Washington, D.C.}}\n* [http:\/\/www.h-net.org\/~dclist\/neighborhoods.html External link to D.C. neighborhood websites]\n* [http:\/\/www.rootsweb.com\/~dcgenweb\/dcmdva.html DC Genealogical Database]\n* [http:\/\/www.ncpc.gov\/ National Capital Planning Commission]\n* [http:\/\/www.about.dc.gov\/ D.C. Guide]\n* [http:\/\/www.hot-maps.de\/north_america\/usa\/washington_dc\/washington\/homede.html Interactive Map of Washington, D.C.]\n* [http:\/\/www.bfcollection.net\/cities\/usa\/dc\/dc01\/dc01.html Washington DC, street by street (historic and modern photographs)]\n* [http:\/\/www.dccouncil.us\/bowser\/images\/ward4.pdf Street map of Ward 4]. \'\'Office of Councilmember Muriel Bowser\'\'.\n{{-}}\n{{Lists of cities by U.S. state}}\n\n[[Category:District of Columbia-related lists|Neighborhoods]]\n[[Category:Neighborhoods in Washington, D.C.|*]]\n[[Category:Lists of neighborhoods in U.S. cities|Washington]]"}]}}}}';

var regex1 = /\*\[\[*([a-zA-Z- ]*)/g;
var regex2 = /[a-zA-Z- ]*\S/g;
matches = str.match(regex1);
hoods = [];
for (var i = 0; i < matches.length; i++) {
  hoods.push(matches[i].match(regex2)[3]);
}
for (var i = 0; i < hoods.length; i++) {
  console.log("\"" + hoods[i] + "\"");
}

var MONGO_URI = 'mongodb://frederickcook:tswildcardftw@staff.mongohq.com:10076/aptag_dev';
var mongoose = require('mongoose');
db = mongoose.connect(MONGO_URI, {auto_reconnect: true});

Tag = require('./models/tag.js');

require('async').forEach(hoods, function(hood, done) {
    Tag.find({name: hood.toLowerCase()}, function(err, tags){
      if (err) {
      console.log(err);
      } else if(!tags.length) {
        console.log(hood + ' not found. inserting.');
        new Tag({name: hood, type: "neighborhood:washingtondc"}).save(function() {
          Tag.findOne({name: hood.toLowerCase()}, function(err, tag){
            console.log(tag.name + ' inserted');
            done();
          });
        });
      } else {
        console.log(tags[0].name + ' found (' + tags.length + ')');
        if (tags.length > 1 && tags[0])
          tags[0].remove();
        done();
      }
    });
});